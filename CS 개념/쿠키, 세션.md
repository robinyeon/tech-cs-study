# 쿠키, 세션
### 연다은봄

### 배경
\- HTTP 프로토콜 환경은 connetionless(요청 후 응답 받으면 연결 끊어버리는 특징), stateless(통신 끝나면 상태 유지 않는 특징)한 특성을 지니기 때문에 서버는 클라이언트가 누구인지 매번 확인해야 한다.              
\- 이 특성을 보완하기 위해 쿠키와 세션 사용            

### 쿠키
\- 클라이언트 로컬에 저장       
\- 키-값이 들어있는 작은 데이터 파일        
\- 서버에서 res시 Response Header의 Set-Cookie 속성을 사용해 쿠키 만들고 헤더에 포함시켜 응답         
\- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 req시 Request Header를 넣어서 자동으로 서버에 전송            

### 세션
\- 서버 접속 시 세션ID를 발급 받고, 클라이언트가 쿠키를 사용해 세션ID 가지고 있음                
\- 클라이언트는 req시 세션ID를 같이 보내고, 서버는 이 세션ID로 세션에 있는 클라이언트의 정보 가져와서 사용                           
\- 세션은 사용자 수만큼 서버 메모리를 차지하기 때문에 최근에는 이런 문제들을 보완한 토큰 기반의 인증방식을 사용하는 추세           

### 차이점
**(1) 사용자의 정보가 저장되는 위치**            
\- 쿠키: 서버의 자원을 전혀 사용 않는다.      
\- 세션: 서버의 자원을 사용한다.     
  	-> 세션은 서버의 자원을 사용하기 때문에 무분별하게 만들다보면 서버의 메모리가 감당할 수 없어질 수가 있고 속도가 느려질 수 있기 때문         

**(2) 보안**        
\- 세션이 더 우수: 세션은 쿠키를 이용해서 세션Id만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 비교적 보안성이 좋다.       
\- 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 req시 스니핑  당할 우려가 있어서 보안에 취약하다.    

**(3) 요청 속도**         
\- 쿠키가 더 우수: 쿠키에 정보가 있기 때문에 서버에 요청 시 속도가 빠름. 세션은 서버의 처리가 필요하기에 비교적 느림.        

**(4) 만료시간**            
\- 쿠키: 만료시간 존재하지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아있을 수 있다. 또한 만료기간을 넉넉하게 잡아 두면 쿠키 삭제를 할 때까지 유지가능         
\- 세션: 만료시간 정할 수 있지만 브라우저가 종료되면 만료시간 상관없이 삭제      

### 캐시      
캐시와 쿠키/세션은 엄연히 다르다.           
\- 캐시: 이미지, css, js 파일 등을 브라우저나 서버 앞 단에 저장해놓고 사용하는 것         
\- 그렇다 보니 한번 캐시에 저장되면 브라우저를 참고하기 때문에, 서버에서 변경이 되어도 사용자는 변경되지 않게 보일 수 있다.           
\- 이런 부분은 캐시를 지워주거나, 서버에서 클라이언트로 응답을 보낼 때 Header에 캐시 만료시간을 명시하는 방법 등을 통해 해결 가능          


[참고](https://interconnection.tistory.com/74)

------------------------
